<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>How Much You Mean To Me üíñ</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Comfortaa&display=swap');
    body {
      background: #ffe4e1;
      font-family: 'Comfortaa', cursive, sans-serif;
      color: #b3003b;
      text-align: center;
      padding: 40px 20px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      user-select: none;
      overflow-x: hidden;
    }
    h1 {
      font-size: 36px;
      margin-bottom: 20px;
    }
    #scratchContainer {
      position: relative;
      width: 320px;
      height: 220px;
      margin: 0 auto 30px;
      border-radius: 20px;
      box-shadow: 0 4px 15px rgba(179, 0, 59, 0.4);
      overflow: hidden;
      cursor: pointer;

      /* Gradient background replacing the photo */
      background: linear-gradient(135deg, #ffafbd, #ffc3a0);
    }
    /* Removed #backgroundImage styles since no photo */

    #message {
      position: absolute;
      width: 100%;
      height: 100%;
      color: white;
      font-size: 22px;
      line-height: 1.4;
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      user-select: text;
      z-index: 1;
      font-weight: 600;
      text-shadow: 0 0 5px #550029;
    }
    canvas {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      border-radius: 20px;
      z-index: 2;
    }
    #sparkles {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 48px;
      color: #ff3366;
      opacity: 0;
      pointer-events: none;
      animation: sparkle 1.5s infinite;
      z-index: 3;
      user-select: none;
    }
    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
      50% { opacity: 1; transform: translate(-50%, -50%) scale(1.3); }
    }
    #loveLetter {
      margin-top: 30px;
      font-size: 22px;
      color: #b3003b;
      font-weight: 600;
      font-family: 'Comfortaa', cursive, sans-serif;
      max-width: 350px;
      margin-left: auto;
      margin-right: auto;
      white-space: pre-wrap;
      min-height: 120px;
      opacity: 0;
      transition: opacity 0.8s ease;
    }
    footer {
      font-size: 14px;
      margin-top: auto;
      color: #80002c;
    }
  </style>
</head>
<body>

  <h1>Scratch to see how much you mean to me ‚ù§Ô∏è</h1>

  <div id="scratchContainer">
    <!-- Removed the photo <img> here -->

    <div id="message">
      You are my sunshine, my heart, my forever.<br />
      I love you more than words can say.
    </div>
    <canvas id="scratchCanvas"></canvas>
    <div id="sparkles">‚ú® I love you! ‚ú®</div>
  </div>

  <div id="loveLetter"></div>

  <footer>With love, <br />‚Äî Your Sejal</footer>

  <audio id="bgMusic" src="fallinginlove.mp3" loop autoplay></audio>

<script>
  const canvas = document.getElementById('scratchCanvas');
  const ctx = canvas.getContext('2d');
  const container = document.getElementById('scratchContainer');
  const sparkles = document.getElementById('sparkles');
  const loveLetterDiv = document.getElementById('loveLetter');

  let scratchedPixels = 0;
  let totalPixels;

  const loveLetterText = `Hey love,\n\nYou mean the world to me. Every moment without you feels incomplete. I‚Äôm sending you all my love through this little note. Can‚Äôt wait to hold you again.\n\nForever yours, Sejal üíñ`;

  let typingIndex = 0;
  let typingInterval;

  function resizeCanvas() {
    canvas.width = container.offsetWidth;
    canvas.height = container.offsetHeight;
    fillCanvas();
    totalPixels = canvas.width * canvas.height;
  }

  function fillCanvas() {
    ctx.globalCompositeOperation = 'source-over';
    ctx.fillStyle = '#b3003b';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
  }

  let isDrawing = false;

  function getPos(e) {
    const rect = canvas.getBoundingClientRect();
    if (e.touches) {
      return {
        x: e.touches[0].clientX - rect.left,
        y: e.touches[0].clientY - rect.top
      };
    }
    return {
      x: e.clientX - rect.left,
      y: e.clientY - rect.top
    };
  }

  function startDrawing(e) {
    e.preventDefault();
    isDrawing = true;
    scratch(e);
  }

  function stopDrawing(e) {
    e.preventDefault();
    isDrawing = false;
  }

  function scratch(e) {
    if (!isDrawing) return;
    const pos = getPos(e);
    ctx.globalCompositeOperation = 'destination-out';
    ctx.beginPath();
    ctx.arc(pos.x, pos.y, 25, 0, 2 * Math.PI);
    ctx.fill();

    scratchedPixels += Math.PI * 25 * 25;

    if (scratchedPixels > totalPixels * 0.4) {
      revealSparklesAndLetter();
    }
  }

  let revealed = false;
  function revealSparklesAndLetter() {
    if (!revealed) {
      revealed = true;
      sparkles.style.opacity = 1;
      loveLetterDiv.style.opacity = 1;
      startTypingLetter();
    }
  }

  function startTypingLetter() {
    typingIndex = 0;
    loveLetterDiv.textContent = '';
    typingInterval = setInterval(() => {
      loveLetterDiv.textContent += loveLetterText.charAt(typingIndex);
      typingIndex++;
      if (typingIndex >= loveLetterText.length) {
        clearInterval(typingInterval);
      }
    }, 50);
  }

  canvas.addEventListener('mousedown', startDrawing);
  canvas.addEventListener('touchstart', startDrawing);

  canvas.addEventListener('mouseup', stopDrawing);
  canvas.addEventListener('touchend', stopDrawing);
  canvas.addEventListener('touchcancel', stopDrawing);

  canvas.addEventListener('mousemove', scratch);
  canvas.addEventListener('touchmove', scratch);

  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);

  const bgMusic = document.getElementById('bgMusic');
  bgMusic.volume = 0.3;

</script>

</body>
</html>
